<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Emotion Tracker - Personal Wellness Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Bootstrap CSS -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #8b5cf6;
            --accent: #06b6d4;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        button.btn .btn-primary{
            background-color:#8b5cf6 ;
        }
        .app-container {
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            min-height: 100vh;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.2);
        }
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        .tab-container {
            background: white;
            border-bottom: 1px solid #e5e7eb;
            padding: 0 20px;
            display: flex;
            overflow-x: auto;
        }
        .tab-button {
            padding: 15px 25px;
            border: none;
            background: none;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #6b7280;
            white-space: nowrap;
            flex-shrink: 0;
        }
        .tab-button.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }
        .tab-button:hover {
            color: var(--primary);
            background: rgba(99, 102, 241, 0.05);
        }
        .tab-content {
            display: none;
            padding: 20px;
        }
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .emotion-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid var(--primary);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        .emotion-card.selected {
            border-left-color: var(--success);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(16, 185, 129, 0.1));
            transform: scale(1.02);
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }
        .emotion-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        .emotion-btn {
            transition: all 0.3s ease;
            border: 3px solid #e5e7eb;
            background: white;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            text-align: center;
            position: relative;
            overflow: hidden;
            user-select: none;
        }
        .emotion-btn.selected {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.3);
        }
        .emotion-btn.selected::before {
            content: '‚úì';
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--success);
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            animation: checkmark 0.3s ease-in;
        }
        @keyframes checkmark {
            0% { transform: scale(0) rotate(180deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        .emotion-btn:hover:not(.selected) {
            border-color: var(--primary);
            transform: scale(1.02);
        }
        .intensity-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e5e7eb;
            outline: none;
            appearance: none;
        }
        .intensity-slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
        }
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal.active {
            display: flex;
        }
        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        .emotion-history-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border-left: 4px solid;
            transition: all 0.3s ease;
        }
        .emotion-history-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            z-index: 1000;
            pointer-events: none;
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: 15px;
        }
        .calendar-day {
            aspect-ratio: 1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            position: relative;
            user-select: none;
        }
        .calendar-day.has-emotions {
            background: var(--success);
            color: white;
        }
        .calendar-day.today {
            border: 2px solid var(--primary);
            font-weight: bold;
            background: rgba(99, 102, 241, 0.1);
        }
        .calendar-day:hover {
            transform: scale(1.1);
        }
        @media (max-width: 768px) {
            .app-container {
                margin: 0;
                border-radius: 0;
            }
            .grid.lg\:grid-cols-3 {
                grid-template-columns: 1fr;
            }
            .grid.lg\:grid-cols-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <h1 class="text-4xl font-bold mb-2">üé≠ Emotion Tracker</h1>
            <p class="text-blue-100 text-lg">Track your emotional journey, understand your patterns</p>
            <div class="flex justify-center items-center space-x-8 mt-6 relative z-10">
                <div class="text-center">
                    <div class="text-3xl font-bold" id="total-entries">23</div>
                    <div class="text-sm opacity-90">Total Entries</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold" id="current-streak">5</div>
                    <div class="text-sm opacity-90">Day Streak</div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold" id="avg-mood">7.2</div>
                    <div class="text-sm opacity-90">Avg Mood</div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="tab-container">
            <button class="tab-button active" onclick="switchTab('dashboard')">
                <i class="fas fa-home mr-2"></i>Dashboard
            </button>
            <button class="tab-button" onclick="switchTab('emotions')">
                <i class="fas fa-heart mr-2"></i>Track Emotions
            </button>
            <button class="tab-button" onclick="switchTab('analytics')">
                <i class="fas fa-chart-line mr-2"></i>Analytics
            </button>
            <button class="tab-button" onclick="switchTab('calendar')">
                <i class="fas fa-calendar mr-2"></i>Calendar
            </button>
            <button class="tab-button" onclick="switchTab('insights')">
                <i class="fas fa-lightbulb mr-2"></i>Insights
            </button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="grid lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Today's Emotional Check-in</h2>
                    
                    <!-- Current Emotions -->
                    <div class="bg-white rounded-lg p-6 shadow-lg mb-6">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold">How are you feeling right now?</h3>
                            <div class="text-sm text-gray-600" id="today-date"></div>
                        </div>
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6" id="current-emotions-grid">
                            <!-- Emotion buttons will be generated here -->
                        </div>
                        <div class="text-center">
                            <button onclick="saveCurrentEmotions()" class="bg-purple-500 text-white px-6 py-2 rounded-lg hover:bg-purple-600 transition">
                                <i class="fas fa-save mr-2"></i>Save Current State
                            </button>
                            <button class="btn btn-primary" style="background-color: #a15cf6"><a  href="../index.html">Home</a></button>
                        </div>
                    </div>

                    <!-- Emotion Intensity & Energy -->
                    <div class="bg-white rounded-lg p-6 shadow-lg mb-6">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-thermometer-half mr-2 text-orange-500"></i>
                            Intensity & Energy Levels
                        </h3>
                        
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between mb-2">
                                    <span class="text-sm font-medium">Overall Emotion Intensity</span>
                                    <span id="intensity-display" class="text-sm font-bold text-red-500">5/10</span>
                                </div>
                                <input type="range" id="intensity-slider" min="1" max="10" value="5" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                       onchange="updateIntensity(this.value)">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>Calm</span>
                                    <span>Intense</span>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-2">
                                    <span class="text-sm font-medium">Energy Level</span>
                                    <span id="energy-display" class="text-sm font-bold text-green-500">5/10</span>
                                </div>
                                <input type="range" id="energy-slider" min="1" max="10" value="5" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                       onchange="updateEnergy(this.value)">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>Drained</span>
                                    <span>Energized</span>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between mb-2">
                                    <span class="text-sm font-medium">Stress Level</span>
                                    <span id="stress-display" class="text-sm font-bold text-yellow-500">5/10</span>
                                </div>
                                <input type="range" id="stress-slider" min="1" max="10" value="5" 
                                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                       onchange="updateStress(this.value)">
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>Relaxed</span>
                                    <span>Stressed</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Daily Reflection -->
                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-pen mr-2 text-indigo-500"></i>
                            Daily Reflection
                        </h3>
                        <textarea id="daily-journal" placeholder="What triggered these emotions? How are you processing your feelings today? What are you grateful for?" 
                                  class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-300 h-32" 
                                  onchange="saveDailyJournal()"></textarea>
                        <div class="mt-2 text-xs text-gray-500">Auto-saved as you type</div>
                    </div>
                </div>

                <!-- Right Sidebar -->
                <div class="space-y-6">
                    <!-- Today's Emotion Summary -->
                    <div class="stat-card text-center">
                        <h3 class="text-lg font-semibold mb-4 relative z-10">Today's Emotional State</h3>
                        <div class="relative inline-block mb-4">
                            <div class="text-6xl mb-2" id="dominant-emotion">üòä</div>
                            <div class="text-lg font-semibold" id="dominant-emotion-name">Happy</div>
                        </div>
                        <div id="emotion-summary" class="relative z-10 text-sm opacity-90">
                            <div id="selected-emotions-count">3 emotions selected</div>
                        </div>
                    </div>

                    <!-- Recent Emotions -->
                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <h3 class="text-lg font-semibold mb-4">Recent Emotions</h3>
                        <div id="recent-emotions" class="space-y-2">
                            <!-- Recent emotion entries will appear here -->
                        </div>
                    </div>

                    <!-- Wellness Tips -->
                    <div class="bg-gradient-to-r from-pink-500 to-violet-500 text-white rounded-lg p-6 text-center">
                        <i class="fas fa-heart text-2xl mb-3 opacity-60"></i>
                        <p class="italic mb-2" id="wellness-tip">"Emotions are temporary visitors. Acknowledge them, but don't let them move in."</p>
                        <button onclick="getNewTip()" class="mt-3 bg-white bg-opacity-20 px-3 py-1 rounded text-sm hover:bg-opacity-30 transition">
                            New Tip
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Track Emotions Tab -->
        <div id="emotions" class="tab-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">Track Your Emotions</h2>
                <div class="text-sm text-gray-600">Select all emotions you're experiencing</div>
            </div>

            <!-- Primary Emotions -->
            <div class="bg-white rounded-lg p-6 shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-4 text-center">Primary Emotions</h3>
                <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4" id="primary-emotions">
                    <!-- Primary emotion buttons will be generated here -->
                </div>
            </div>

            <!-- Secondary Emotions -->
            <div class="bg-white rounded-lg p-6 shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-4 text-center">Secondary Emotions</h3>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="secondary-emotions">
                    <!-- Secondary emotion buttons will be generated here -->
                </div>
            </div>

            <!-- Context & Triggers -->
            <div class="bg-white rounded-lg p-6 shadow-lg">
                <h3 class="text-xl font-semibold mb-4">Context & Triggers</h3>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium mb-2">What triggered these emotions?</label>
                        <select id="trigger-select" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-300">
                            <option value="">Select a trigger...</option>
                            <option value="work">Work/Career</option>
                            <option value="relationships">Relationships</option>
                            <option value="family">Family</option>
                            <option value="health">Health</option>
                            <option value="finances">Finances</option>
                            <option value="social">Social Situation</option>
                            <option value="personal">Personal Achievement</option>
                            <option value="weather">Weather/Environment</option>
                            <option value="news">News/Current Events</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium mb-2">Where are you?</label>
                        <select id="location-select" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-300">
                            <option value="">Select location...</option>
                            <option value="home">Home</option>
                            <option value="work">Work</option>
                            <option value="commute">Commuting</option>
                            <option value="outdoors">Outdoors</option>
                            <option value="social">Social Setting</option>
                            <option value="exercise">Exercise/Gym</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                </div>
                
                <div class="mt-4">
                    <label class="block text-sm font-medium mb-2">Additional Notes</label>
                    <textarea id="emotion-notes" placeholder="Describe what you're experiencing in more detail..." 
                              class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-purple-300 h-24"></textarea>
                </div>

                <div class="text-center mt-6">
                    <button onclick="saveEmotionEntry()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-3 rounded-lg hover:from-purple-600 hover:to-pink-600 transition flex items-center justify-center mx-auto">
                        <i class="fas fa-heart mr-2"></i>Save Emotion Entry
                    </button>
                </div>
            </div>
        </div>

        <!-- Analytics Tab -->
        <div id="analytics" class="tab-content">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Emotional Analytics</h2>
            
            <div class="grid lg:grid-cols-2 gap-6 mb-6">
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4">Weekly Mood Trends</h3>
                    <canvas id="weeklyMoodChart" aria-label="Line chart showing weekly mood trends" role="img"></canvas>
                </div>
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4">Emotion Distribution</h3>
                    <canvas id="emotionDistributionChart" aria-label="Pie chart showing emotion distribution" role="img"></canvas>
                </div>
            </div>

            <div class="grid lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4">Trigger Analysis</h3>
                    <canvas id="triggerChart" aria-label="Bar chart showing trigger analysis" role="img"></canvas>
                </div>
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4">Energy vs Mood</h3>
                    <canvas id="energyMoodChart" aria-label="Scatter chart showing energy versus mood" role="img"></canvas>
                </div>
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4">Pattern Insights</h3>
                    <div class="space-y-3">
                        <div class="p-3 bg-blue-50 rounded-lg">
                            <div class="font-semibold text-blue-800">Most Common Emotion</div>
                            <div class="text-blue-600">Happy (32% of entries)</div>
                        </div>
                        <div class="p-3 bg-yellow-50 rounded-lg">
                            <div class="font-semibold text-yellow-800">Peak Energy Time</div>
                            <div class="text-yellow-600">Morning (9-11 AM)</div>
                        </div>
                        <div class="p-3 bg-green-50 rounded-lg">
                            <div class="font-semibold text-green-800">Stress Trigger</div>
                            <div class="text-green-600">Work (45% of stress)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Calendar Tab -->
        <div id="calendar" class="tab-content">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Emotion Calendar</h2>
            
            <div class="grid lg:grid-cols-3 gap-6">
                <div class="lg:col-span-2">
                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-xl font-semibold">Monthly Emotional Journey</h3>
                            <div class="flex items-center space-x-2">
                                <button onclick="previousMonth()" class="p-2 rounded-lg hover:bg-gray-100" aria-label="Previous month">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <span id="current-month" class="font-semibold min-w-32 text-center" aria-live="polite"></span>
                                <button onclick="nextMonth()" class="p-2 rounded-lg hover:bg-gray-100" aria-label="Next month">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                        <div class="grid grid-cols-7 gap-2 mb-4" aria-hidden="true">
                            <div class="text-center font-semibold text-gray-600 py-2">Sun</div>
                            <div class="text-center font-semibold text-gray-600 py-2">Mon</div>
                            <div class="text-center font-semibold text-gray-600 py-2">Tue</div>
                            <div class="text-center font-semibold text-gray-600 py-2">Wed</div>
                            <div class="text-center font-semibold text-gray-600 py-2">Thu</div>
                            <div class="text-center font-semibold text-gray-600 py-2">Fri</div>
                            <div class="text-center font-semibold text-gray-600 py-2">Sat</div>
                        </div>
                        <div id="calendar-container" class="calendar-grid" role="grid" aria-label="Emotion calendar days">
                            <!-- Calendar will be generated here -->
                        </div>
                    </div>
                </div>
                
                <div class="space-y-6">
                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <h3 class="text-lg font-semibold mb-4">Legend</h3>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-green-500 rounded mr-2" aria-hidden="true"></div>
                                <span class="text-sm">Emotions Tracked</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-4 bg-gray-200 rounded mr-2" aria-hidden="true"></div>
                                <span class="text-sm">No Entry</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-4 h-4 border-2 border-purple-500 rounded mr-2" aria-hidden="true"></div>
                                <span class="text-sm">Today</span>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-lg p-6 shadow-lg">
                        <h3 class="text-lg font-semibold mb-4">Monthly Stats</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span>Days Tracked:</span>
                                <span class="font-bold text-green-500" id="monthly-tracked">23</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Avg Mood Score:</span>
                                <span class="font-bold text-blue-500" id="monthly-avg-mood">7.2</span>
                            </div>
                            <div class="flex justify-between">
                                <span>Best Day:</span>
                                <span class="font-bold text-purple-500" id="monthly-best">Aug 15</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Insights Tab -->
        <div id="insights" class="tab-content">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Emotional Insights & History</h2>
            
            <!-- Recent Emotion History -->
            <div class="bg-white rounded-lg p-6 shadow-lg mb-6">
                <h3 class="text-xl font-semibold mb-4">Recent Emotion Entries</h3>
                <div id="emotion-history" class="space-y-3" aria-live="polite" aria-relevant="additions">
                    <!-- Emotion history will be generated here -->
                </div>
            </div>

            <!-- Patterns & Recommendations -->
            <div class="grid lg:grid-cols-3 gap-6">
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4">Patterns</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li>Happy is the most frequent emotion during weekends.</li>
                        <li>Stress peaks on Monday mornings.</li>
                        <li>Energy levels correlate with sleep quality.</li>
                    </ul>
                </div>
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4">Recommendations</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li>Try mindfulness meditation to reduce stress.</li>
                        <li>Schedule breaks during high-stress periods.</li>
                        <li>Engage in physical activity to boost energy.</li>
                    </ul>
                </div>
                <div class="bg-white rounded-lg p-6 shadow-lg">
                    <h3 class="text-lg font-semibold mb-4">Resources</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li><a href="https://www.headspace.com" target="_blank" class="text-purple-600 hover:underline">Headspace Meditation</a></li>
                        <li><a href="https://www.mindful.org" target="_blank" class="text-purple-600 hover:underline">Mindful.org</a></li>
                        <li><a href="https://www.psychologytoday.com" target="_blank" class="text-purple-600 hover:underline">Psychology Today</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

<script>
    // Tab switching
    function switchTab(tabId) {
        document.querySelectorAll('.tab-button').forEach(btn => {
            btn.classList.remove('active');
        });
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.remove('active');
        });
        event.currentTarget.classList.add('active');
        document.getElementById(tabId).classList.add('active');
    }

    // Date display for today
    function formatDate(date) {
        return date.toLocaleDateString(undefined, { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' });
    }
    const todayDateElem = document.getElementById('today-date');
    const today = new Date();
    todayDateElem.textContent = formatDate(today);

    // Emotions data
    const primaryEmotionsData = [
        { name: 'Happy', icon: 'üòä', color: '#facc15' },
        { name: 'Sad', icon: 'üò¢', color: '#3b82f6' },
        { name: 'Angry', icon: 'üò†', color: '#ef4444' },
        { name: 'Fearful', icon: 'üò®', color: '#8b5cf6' },
        { name: 'Surprised', icon: 'üò≤', color: '#10b981' },
        { name: 'Disgusted', icon: 'ü§¢', color: '#84cc16' }
    ];
    const secondaryEmotionsData = [
        { name: 'Excited', icon: 'ü§©', color: '#f97316' },
        { name: 'Anxious', icon: 'üò∞', color: '#f59e0b' },
        { name: 'Lonely', icon: 'üòû', color: '#60a5fa' },
        { name: 'Confident', icon: 'üòé', color: '#8b5cf6' },
        { name: 'Frustrated', icon: 'üò§', color: '#dc2626' },
        { name: 'Calm', icon: 'üòå', color: '#22c55e' },
        { name: 'Bored', icon: 'üòê', color: '#9ca3af' },
        { name: 'Hopeful', icon: 'ü§û', color: '#3b82f6' }
    ];

    // Generate emotion buttons for current emotions grid (dashboard)
    const currentEmotionsGrid = document.getElementById('current-emotions-grid');
    const allEmotions = [...primaryEmotionsData, ...secondaryEmotionsData];
    let selectedCurrentEmotions = new Set();

    function createEmotionButton(emotion, container, isSelectable = true) {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'emotion-btn';
        btn.style.borderColor = '#e5e7eb';
        btn.style.color = emotion.color;
        btn.setAttribute('aria-pressed', 'false');
        btn.setAttribute('aria-label', emotion.name);
        btn.innerHTML = `<span class="text-3xl">${emotion.icon}</span><div class="mt-2 font-semibold">${emotion.name}</div>`;
        if (isSelectable) {
            btn.addEventListener('click', () => {
                if (selectedCurrentEmotions.has(emotion.name)) {
                    selectedCurrentEmotions.delete(emotion.name);
                    btn.classList.remove('selected');
                    btn.setAttribute('aria-pressed', 'false');
                } else {
                    selectedCurrentEmotions.add(emotion.name);
                    btn.classList.add('selected');
                    btn.setAttribute('aria-pressed', 'true');
                }
                updateDominantEmotion();
                updateSelectedEmotionsCount();
            });
        } else {
            btn.disabled = true;
        }
        container.appendChild(btn);
    }

    // Populate current emotions grid
    allEmotions.forEach(emotion => {
        createEmotionButton(emotion, currentEmotionsGrid);
    });

    // Update dominant emotion and summary on dashboard
    function updateDominantEmotion() {
        const dominantEmotionElem = document.getElementById('dominant-emotion');
        const dominantEmotionNameElem = document.getElementById('dominant-emotion-name');
        if (selectedCurrentEmotions.size === 0) {
            dominantEmotionElem.textContent = 'üòê';
            dominantEmotionNameElem.textContent = 'Neutral';
        } else {
            // Pick the first selected emotion as dominant for demo
            const firstEmotionName = Array.from(selectedCurrentEmotions)[0];
            const emotion = allEmotions.find(e => e.name === firstEmotionName);
            dominantEmotionElem.textContent = emotion.icon;
            dominantEmotionNameElem.textContent = emotion.name;
        }
    }
    function updateSelectedEmotionsCount() {
        const countElem = document.getElementById('selected-emotions-count');
        const count = selectedCurrentEmotions.size;
        countElem.textContent = count === 1 ? '1 emotion selected' : `${count} emotions selected`;
    }
    updateDominantEmotion();
    updateSelectedEmotionsCount();

    // Save current emotions (dummy function)
    function saveCurrentEmotions() {
        alert(`Saved emotions: ${Array.from(selectedCurrentEmotions).join(', ')}`);
    }

    // Intensity, Energy, Stress sliders
    const intensitySlider = document.getElementById('intensity-slider');
    const energySlider = document.getElementById('energy-slider');
    const stressSlider = document.getElementById('stress-slider');
    const intensityDisplay = document.getElementById('intensity-display');
    const energyDisplay = document.getElementById('energy-display');
    const stressDisplay = document.getElementById('stress-display');

    function updateIntensity(value) {
        intensityDisplay.textContent = `${value}/10`;
    }
    function updateEnergy(value) {
        energyDisplay.textContent = `${value}/10`;
    }
    function updateStress(value) {
        stressDisplay.textContent = `${value}/10`;
    }
    intensitySlider.addEventListener('input', e => updateIntensity(e.target.value));
    energySlider.addEventListener('input', e => updateEnergy(e.target.value));
    stressSlider.addEventListener('input', e => updateStress(e.target.value));

    // Daily journal save (dummy)
    function saveDailyJournal() {
        const journal = document.getElementById('daily-journal').value;
        // Auto-save logic here
        console.log('Daily journal saved:', journal);
    }

    // Wellness tips
    const wellnessTips = [
        "Emotions are temporary visitors. Acknowledge them, but don't let them move in.",
        "Breathing deeply can help calm your mind and body.",
        "Taking a short walk can improve your mood and energy.",
        "Journaling your feelings helps in understanding your emotional patterns.",
        "Remember to be kind to yourself during tough times.",
        "Connecting with loved ones can boost your emotional wellbeing.",
        "Practice gratitude daily to enhance positive emotions.",
        "Mindfulness meditation can reduce stress and anxiety.",
        "Physical exercise releases endorphins that improve mood.",
        "Sleep well to maintain emotional balance."
    ];
    const wellnessTipElem = document.getElementById('wellness-tip');
    function getNewTip() {
        const randomIndex = Math.floor(Math.random() * wellnessTips.length);
        wellnessTipElem.textContent = `"${wellnessTips[randomIndex]}"`;
    }

    // Recent emotions (dummy data)
    const recentEmotionsData = [
        { date: '2024-06-20', emotions: ['Happy', 'Excited'], notes: 'Had a great day at work!' },
        { date: '2024-06-19', emotions: ['Sad', 'Lonely'], notes: 'Missed my friends.' },
        { date: '2024-06-18', emotions: ['Angry', 'Frustrated'], notes: 'Traffic jam made me late.' },
        { date: '2024-06-17', emotions: ['Calm', 'Hopeful'], notes: 'Meditated in the morning.' },
        { date: '2024-06-16', emotions: ['Anxious'], notes: 'Upcoming presentation.' }
    ];
    const recentEmotionsContainer = document.getElementById('recent-emotions');
    function renderRecentEmotions() {
        recentEmotionsContainer.innerHTML = '';
        recentEmotionsData.forEach(entry => {
            const div = document.createElement('div');
            div.className = 'emotion-card';
            div.innerHTML = `
                <div class="flex justify-between items-center mb-2">
                    <div class="font-semibold">${new Date(entry.date).toLocaleDateString()}</div>
                    <div class="text-sm text-gray-500">${entry.emotions.join(', ')}</div>
                </div>
                <div class="text-gray-700 text-sm">${entry.notes}</div>
            `;
            recentEmotionsContainer.appendChild(div);
        });
    }
    renderRecentEmotions();

    // Track Emotions Tab - generate primary and secondary emotion buttons
    const primaryEmotionsContainer = document.getElementById('primary-emotions');
    const secondaryEmotionsContainer = document.getElementById('secondary-emotions');
    let selectedTrackEmotions = new Set();

    function createTrackEmotionButton(emotion, container) {
        const btn = document.createElement('button');
        btn.type = 'button';
        btn.className = 'emotion-btn';
        btn.style.borderColor = '#e5e7eb';
        btn.style.color = emotion.color;
        btn.setAttribute('aria-pressed', 'false');
        btn.setAttribute('aria-label', emotion.name);
        btn.innerHTML = `<span class="text-3xl">${emotion.icon}</span><div class="mt-2 font-semibold">${emotion.name}</div>`;
        btn.addEventListener('click', () => {
            if (selectedTrackEmotions.has(emotion.name)) {
                selectedTrackEmotions.delete(emotion.name);
                btn.classList.remove('selected');
                btn.setAttribute('aria-pressed', 'false');
            } else {
                selectedTrackEmotions.add(emotion.name);
                btn.classList.add('selected');
                btn.setAttribute('aria-pressed', 'true');
            }
        });
        container.appendChild(btn);
    }
    primaryEmotionsData.forEach(emotion => createTrackEmotionButton(emotion, primaryEmotionsContainer));
    secondaryEmotionsData.forEach(emotion => createTrackEmotionButton(emotion, secondaryEmotionsContainer));

    // Save emotion entry (dummy)
    function saveEmotionEntry() {
        const trigger = document.getElementById('trigger-select').value;
        const location = document.getElementById('location-select').value;
        const notes = document.getElementById('emotion-notes').value;
        if (selectedTrackEmotions.size === 0) {
            alert('Please select at least one emotion.');
            return;
        }
        alert(`Saved emotions: ${Array.from(selectedTrackEmotions).join(', ')}\nTrigger: ${trigger}\nLocation: ${location}\nNotes: ${notes}`);
    }

    // Analytics charts setup
    const weeklyMoodCtx = document.getElementById('weeklyMoodChart').getContext('2d');
    const emotionDistributionCtx = document.getElementById('emotionDistributionChart').getContext('2d');
    const triggerChartCtx = document.getElementById('triggerChart').getContext('2d');
    const energyMoodCtx = document.getElementById('energyMoodChart').getContext('2d');

    const weeklyMoodChart = new Chart(weeklyMoodCtx, {
        type: 'line',
        data: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [{
                label: 'Mood Score',
                data: [6, 7, 5, 8, 7, 9, 8],
                borderColor: 'rgba(99, 102, 241, 1)',
                backgroundColor: 'rgba(99, 102, 241, 0.2)',
                fill: true,
                tension: 0.3,
                pointRadius: 5,
                pointHoverRadius: 7,
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { min: 0, max: 10, ticks: { stepSize: 1 } }
            },
            plugins: {
                legend: { display: false }
            }
        }
    });

    const emotionDistributionChart = new Chart(emotionDistributionCtx, {
        type: 'doughnut',
        data: {
            labels: ['Happy', 'Sad', 'Angry', 'Fearful', 'Surprised', 'Disgusted'],
            datasets: [{
                data: [32, 15, 10, 8, 20, 15],
                backgroundColor: [
                    '#facc15',
                    '#3b82f6',
                    '#ef4444',
                    '#8b5cf6',
                    '#10b981',
                    '#84cc16'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { position: 'bottom' }
            }
        }
    });

    const triggerChart = new Chart(triggerChartCtx, {
        type: 'bar',
        data: {
            labels: ['Work', 'Relationships', 'Health', 'Finances', 'Social', 'Other'],
            datasets: [{
                label: 'Trigger Frequency',
                data: [45, 25, 15, 10, 5, 8],
                backgroundColor: 'rgba(139, 92, 246, 0.7)',
                borderRadius: 5
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: { beginAtZero: true }
            },
            plugins: {
                legend: { display: false }
            }
        }
    });

    const energyMoodChart = new Chart(energyMoodCtx, {
        type: 'scatter',
        data: {
            datasets: [{
                label: 'Energy vs Mood',
                data: [
                    { x: 3, y: 5 },
                    { x: 6, y: 7 },
                    { x: 8, y: 9 },
                    { x: 4, y: 6 },
                    { x: 7, y: 8 },
                    { x: 5, y: 6 }
                ],
                backgroundColor: 'rgba(99, 102, 241, 0.8)'
            }]
        },
        options: {
            responsive: true,
            scales: {
                x: {
                    title: { display: true, text: 'Energy Level' },
                    min: 0,
                    max: 10,
                    ticks: { stepSize: 1 }
                },
                y: {
                    title: { display: true, text: 'Mood Score' },
                    min: 0,
                    max: 10,
                    ticks: { stepSize: 1 }
                }
            },
            plugins: {
                legend: { display: false }
            }
        }
    });

    // Calendar generation
    const calendarContainer = document.getElementById('calendar-container');
    const currentMonthElem = document.getElementById('current-month');
    let currentYear, currentMonth;

    // Dummy emotion entries for calendar days (YYYY-MM-DD)
    const calendarEmotionEntries = {
        '2024-06-01': true,
        '2024-06-03': true,
        '2024-06-05': true,
        '2024-06-10': true,
        '2024-06-15': true,
        '2024-06-20': true,
        '2024-06-23': true,
        '2024-06-25': true,
        '2024-06-28': true,
        '2024-06-30': true
    };

    function generateCalendar(year, month) {
        calendarContainer.innerHTML = '';
        currentYear = year;
        currentMonth = month;
        const firstDay = new Date(year, month, 1);
        const lastDay = new Date(year, month + 1, 0);
        const firstWeekday = firstDay.getDay(); // 0=Sun
        const daysInMonth = lastDay.getDate();

        currentMonthElem.textContent = firstDay.toLocaleDateString(undefined, { month: 'long', year: 'numeric' });

        // Fill blanks for days before first day
        for (let i = 0; i < firstWeekday; i++) {
            const blankDay = document.createElement('div');
            blankDay.className = 'calendar-day pointer-events-none bg-gray-50 border-transparent';
            blankDay.setAttribute('aria-hidden', 'true');
            calendarContainer.appendChild(blankDay);
        }

        // Fill days
        for (let day = 1; day <= daysInMonth; day++) {
            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const dayElem = document.createElement('button');
            dayElem.type = 'button';
            dayElem.className = 'calendar-day';
            dayElem.textContent = day;
            dayElem.setAttribute('aria-label', `Day ${day} of ${currentMonthElem.textContent}`);
            if (calendarEmotionEntries[dateStr]) {
                dayElem.classList.add('has-emotions');
            }
            const todayDateStr = new Date().toISOString().slice(0, 10);
            if (dateStr === todayDateStr) {
                dayElem.classList.add('today');
                dayElem.setAttribute('aria-current', 'date');
            }
            dayElem.addEventListener('click', () => {
                alert(`Clicked on ${dateStr}`);
            });
            calendarContainer.appendChild(dayElem);
        }
    }

    function previousMonth() {
        if (currentMonth === 0) {
            currentMonth = 11;
            currentYear--;
        } else {
            currentMonth--;
        }
        generateCalendar(currentYear, currentMonth);
    }
    function nextMonth() {
        if (currentMonth === 11) {
            currentMonth = 0;
            currentYear++;
        } else {
            currentMonth++;
        }
        generateCalendar(currentYear, currentMonth);
    }

    // Initialize calendar to current month
    const now = new Date();
    generateCalendar(now.getFullYear(), now.getMonth());

    // Emotion history for Insights tab (dummy data)
    const emotionHistoryData = [
        { date: '2024-06-20', emotions: ['Happy', 'Excited'], notes: 'Had a great day at work!' },
        { date: '2024-06-19', emotions: ['Sad', 'Lonely'], notes: 'Missed my friends.' },
        { date: '2024-06-18', emotions: ['Angry', 'Frustrated'], notes: 'Traffic jam made me late.' },
        { date: '2024-06-17', emotions: ['Calm', 'Hopeful'], notes: 'Meditated in the morning.' },
        { date: '2024-06-16', emotions: ['Anxious'], notes: 'Upcoming presentation.' },
        { date: '2024-06-15', emotions: ['Happy'], notes: 'Good news from family.' },
        { date: '2024-06-14', emotions: ['Stressed'], notes: 'Deadlines approaching.' },
        { date: '2024-06-13', emotions: ['Relaxed'], notes: 'Weekend vibes.' },
        { date: '2024-06-12', emotions: ['Excited'], notes: 'Planning a trip.' },
        { date: '2024-06-11', emotions: ['Bored'], notes: 'Nothing much happening.' }
    ];
    const emotionHistoryContainer = document.getElementById('emotion-history');
    function renderEmotionHistory() {
        emotionHistoryContainer.innerHTML = '';
        emotionHistoryData.forEach(entry => {
            const div = document.createElement('div');
            div.className = 'emotion-history-item';
            const borderColor = entry.emotions.includes('Happy') ? '#facc15' :
                                entry.emotions.includes('Sad') ? '#3b82f6' :
                                entry.emotions.includes('Angry') ? '#ef4444' :
                                '#6366f1';
            div.style.borderLeftColor = borderColor;
            div.innerHTML = `
                <div class="flex justify-between items-center mb-2">
                    <div class="font-semibold">${new Date(entry.date).toLocaleDateString()}</div>
                    <div class="text-sm text-gray-600">${entry.emotions.join(', ')}</div>
                </div>
                <div class="text-gray-700 text-sm">${entry.notes}</div>
            `;
            emotionHistoryContainer.appendChild(div);
        });
    }
    renderEmotionHistory();
</script>
</body>
</html>